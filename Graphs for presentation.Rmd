---
    title: "Graphs and Plots"
author: "Camille"
date: "19/06/2017"
output: html_
---
    
    ```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(data.table)
library(zoo)
library(ggplot2)
library(forecast)
library(caret)
library(reshape2) 
```

```{r}
train<-readRDS("train.b1.v3")
test<-readRDS("test.b1.v3")
store<-readRDS("class.b1.v3")

summary(train)
```

```{r}
sales.by.storeP.df <- aggregate(train$Sales,by = list(train$Store,train$Promo),mean)
names(sales.by.storeP.df) <- c("Store","isPromo","Average.Sales")
ggplot(data=sales.by.storeP.df,aes(Store,Average.Sales, color=isPromo, shape =isPromo)) + geom_point() +
    scale_color_brewer(palette="Set2") +
    ggtitle("Average Sales of each store by promo")

```
```{r}
train_sub<-subset(train, Sales != 0 & !is.na(CompetitionDistance), drop = TRUE)

salesByDist <- aggregate(train_sub$Sales, 
               by = list(train_sub$CompetitionDistance), mean)
colnames(salesByDist) <- c("CompetitionDistance", "MeanSales")

ggplot(salesByDist, aes(x = CompetitionDistance, y = MeanSales)) + 
    geom_point() + scale_color_brewer(palette="Set2") + geom_smooth()
```
```{r}
train_sub<-subset(train, Sales != 0 & !is.na(CompetitionDistance), drop = TRUE)

salesByDist <- aggregate(train_sub$Sales, 
               by = list(train_sub$CompetitionDistance), mean)
colnames(salesByDist) <- c("CompetitionDistance", "MeanSales")

ggplot(salesByDist, aes(x = log(CompetitionDistance), y = log(MeanSales))) + 
    geom_point() + scale_color_brewer(palette="Set2") + geom_smooth()
```

```{r}

ggplot(train, 
       aes(x = as.Date(Date), y = Sales)) +
    geom_smooth(size = 2)
```